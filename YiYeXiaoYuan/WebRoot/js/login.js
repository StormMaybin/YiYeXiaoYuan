/** * Created by p on 2016/11/12. *//** * Created by p on 2016/11/10. *///testfunction cons(x) {    console.log(x);}$(function () {    $('#login-submit').on('tap click',function (e) {        e.preventDefault();        var $number=$('#number').val();        var $password=$('#password').val();        var $validate_num=$("#validate_num").val();        var show_rsp_window=function (selector) {            $(selector).fadeIn(300);            setTimeout(function () {                $(selector).fadeOut(300);            },2000);        };        var show_rsp_txt=function () {            $('#login_rsp').slideDown(300);            setTimeout(function () {                $('#login_rsp').slideUp(300);            },3000);        };//登陆验证后的文本响应        var test_password=function (wrd) {            if (wrd.length>=6&&wrd.length<=12) {                return 1;            }            else {                return 0;            }        };//验证密码是否符合长度要求        var test_number=function (num) {            var reg=/[0-9]{11}/;            if (reg.test(num)==true){                return 1;            }            else{                return 0;            }        };//匹配电话号码 t1 f0        if(test_number($number)==1){            if(test_password($password)==1){                if($validate_num!=img_validate.img[x1].id){                    $('#login_rsp_txt').html('验证码输入错误');                    show_rsp_txt();                }                else{                    $.ajax({                    method:"post",                    url:'',                    dataType:'json',                    data:{                        'usr_id':$number,                        'usr_password':$password                    },                    success:function (data) {                        //0  有id，但密码错误                        //1  成功                        //-1  无id                        if(data.status==1){                            $('#dialog-success').fadeIn(300);                            setTimeout(function () {                                window.history.go(-1);                            },2000);                        }                        if(data.status==0){                            $('#login_rsp_txt').html('密码错误');                            $('#login_rsp_href').html('立即重置密码').attr('href','getPassword1.html');                            show_rsp_txt()                        }                        if(data.status==-1){                            $('#login_rsp_txt').html('该用户不存在');                            $('#login_rsp_href').html('立即注册').attr('href','注册1.html');                            show_rsp_txt();                        }                    },                    error:function (XHR) {                        alert('net wrong'+XHR.readyState+XHR.status);                    }                });}            }            else{                show_rsp_window('#dialog-wrong_wrd');                return false;            }//密码格式错误        }        else {            show_rsp_window('#dialog-wrong_num');            return false;        }//用户名格式错误    });    //setUsername    $('#user-name').on('click tap',function(e){		e.preventDefault();		var $userName=$('#input-name').val();		var show_rsp_window=function (selector) {	        $(selector).fadeIn(300);	        setTimeout(function () {	        $(selector).fadeOut(300);	            },2000);        };        var regUser1=/[a-zA-Z]{4,16}/;        var regUser2=/[\u4e00-\u9fa5]{2,8}/;        $.ajax({        	method:'post',        	url:'',        	dataType:'json',       		data:{       			'usr_username':$username,       			'usr_count':$count       		},       		success:function(data){       			//true 可修改       			//false 不可修改       			if(data.status==true){			        if(regUser1.test($userName)==false&&regUser2.test($userName)==false){			        	show_rsp_window('#buhefa');			        }else			        {			        	$.ajax({			        		method:'post',			        		url:'',			        		dataType:'json',			        		data:{			        			'usr_username':$username			        		},			        		success:function(data){			        			//0 用户名已被使用			        			//1 用户名可用			        			if(data.status==1){			        							        			}			        			if(data.status==0){			        				show_rsp_window('#used');			        			}			        		},			        		error:function (XHR) {			                        alert('net wrong');			        	}			        })			        					}       				       			}       			if(data.status==false){       				show_rsp_window('#corrected');       			}		       		}        })    });});